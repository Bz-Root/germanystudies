jQuery(function($){$("#wrapper a[href^='http://'],a.blank,#wrapper a[href^='https://'],#wrapper a[href^='//']").attr("target","_blank");if(top.location.hostname!=self.location.hostname){top.location.href=self.location.href}$(document).on("click",".ajaxLink",function(e){e.preventDefault();var url=$(this).attr("href");var data=$(this).data("data")?$(this).data("data"):{};var method=$(this).data("method")?$(this).data("method"):"get";var js=$(this).data("js")?$(this).data("js"):{};if(js.confirm)if(!confirm(js.confirm))return false;if(method=="post")if(SITE.request.enableCsrfValidation){data[SITE.request.csrfTokenName]=SITE.request.csrfToken}$.ajax({method:method,url:url,data:data}).done(function(content){if(!js.format)js.format="html";if(!js.target)js.target=$(this);switch(js.action){case"remove":$(js.target).hide("slow");break;case"replace":$(js.target).replaceWith(content);break;case"insert":$(js.target).html(content);break;case"modal":$(".modal-body",js.target).html(content);$(js.target).modal({show:true});break}});return false});setTimeout(function(){$(".equal-height .h").matchHeight()},200);$(".cd-slider-nav li").on("click",function(event){event.preventDefault();var selectedItem=$(this);if(!selectedItem.hasClass("selected")){var selectedPosition=selectedItem.index(),activePosition=$(".cd-hero-slider .selected").index();if(activePosition<selectedPosition){nextSlide($(".cd-hero-slider"),$(".cd-slider-nav"),selectedPosition)}else{prevSlide($(".cd-hero-slider"),$(".cd-slider-nav"),selectedPosition)}updateNavigationMarker(selectedPosition+1)}});$(".form-control.error, .checkbox input.error, .control-label.error").closest(".form-group").addClass("has-error").closest(".change-form").removeClass("hide").siblings(".change-link").addClass("hide");$("body").tooltip({container:"body",selector:"[rel=tooltip],[data-toggle=tooltip],.lesson-done .exercise-show-answer"}).on("shown.bs.tooltip",function(e){var that=$(e.target);setTimeout(function(){$(that).tooltip("hide")},5e3)});$(".popovertrigger").popover({html:true,content:function(){if($(this).data("target")){var el=$(this).data("target");return $(el).html()}}});var jsplayer=$('<div id="jquery_jplayer" class="jp-jplayer"></div>');$("body").append(jsplayer);$(jsplayer).jPlayer({swfPath:"",wmode:"window",supplied:"mp3",preload:"true"});$.fn.select2.defaults.set("theme","bootstrap");$(".select2").select2({width:null});$(document).on("click.sound",".sound,.sb",function(e){var sound_mp3=$(this).is("a")?$(this).attr("href"):$(this).data("sound")?$(this).data("sound"):$(this).find("a").attr("href");if(!sound_mp3||sound_mp3==""||sound_mp3=="#")return;if($(e.target).hasClass("no-sb")){return}$(jsplayer).jPlayer("setMedia",{mp3:sound_mp3}).jPlayer("play")});if(SITE.isAuth){$(document).on("click touchstart",".sentence var, sentence var",function(e){e.stopPropagation();var e=$(this);var w=$(this).html();if(!SITE.dict.available){$("#dictionary-button").trigger("click");return}var data={word:w,dictionary:SITE.i18n.sourceLanguage+"|"+SITE.dict.language};if(SITE.request.enableCsrfValidation){data[SITE.request.csrfTokenName]=SITE.request.csrfToken}$.post(SITE.dict.route,data).done(function(data){e.popover({content:data,html:true,placement:"bottom",container:"body"}).popover("show")})});$("body").on("click touchstart",function(e){$(".sentence var, sentence var").each(function(){if(!$(this).is(e.target)&&$(this).has(e.target).length===0&&$(".popover").has(e.target).length===0){$(this).popover("hide")}})});$("#dictionary_modal").on("shown.bs.modal",function(){$("#DictWords_word").focus();SITE.utils.initDictionary();$("#DictWords_dictionary").select2({dropdownParent:$("#dictionary_modal"),width:null})});$(document).on("keydown",null,"alt+1",function(e){e.preventDefault();SITE.utils.showDictionary()});$("#dictionary-button").on("click",function(e){e.preventDefault();SITE.utils.showDictionary()});SITE.utils.initKeyboard();setInterval(function(){$.getJSON(SITE.routes.notifications,function(data){})},3e4)}if(!Modernizr.svg){$(".svg-sprite").each(function(){$(this).removeClass("svg")})}});!function(e,n,s){function o(e,n){return typeof e===n}function a(){var e,n,s,a,t,l,r;for(var c in i)if(i.hasOwnProperty(c)){if(e=[],n=i[c],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(s=0;s<n.options.aliases.length;s++)e.push(n.options.aliases[s].toLowerCase());for(a=o(n.fn,"function")?n.fn():n.fn,t=0;t<e.length;t++)l=e[t],r=l.split("."),1===r.length?Modernizr[r[0]]=a:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=a),f.push((a?"":"no-")+r.join("-"))}}function t(e){var n=r.className,s=Modernizr._config.classPrefix||"";if(c&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+s+"no-js(\\s|$)");n=n.replace(o,"$1"+s+"js$2")}Modernizr._config.enableClasses&&(n+=" "+s+e.join(" "+s),c?r.className.baseVal=n:r.className=n)}var i=[],l={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var s=this;setTimeout(function(){n(s[e])},0)},addTest:function(e,n,s){i.push({name:e,fn:n,options:s})},addAsyncTest:function(e){i.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=l,Modernizr=new Modernizr;var f=[],r=n.documentElement,c="svg"===r.nodeName.toLowerCase();Modernizr.addTest("svg",!!n.createElementNS&&!!n.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),a(),t(f),delete l.addTest,delete l.addAsyncTest;for(var u=0;u<Modernizr._q.length;u++)Modernizr._q[u]();e.Modernizr=Modernizr}(window,document);!function(t){var n="oninput"in document.createElement("input")?"input":"keydown";t.fn.autoGrowInput=function(o){var e=t.extend({maxWidth:500,minWidth:20,comfortZone:0},o);return this.each(function(){var i=t(this),a=" ",r=o&&"comfortZone"in o?e.comfortZone:parseInt(i.css("fontSize")),c=t("<span/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),letterSpacing:i.css("letterSpacing"),textTransform:i.css("textTransform"),whiteSpace:"nowrap",ariaHidden:!0}).appendTo("body"),s=function(t){if(a!==(a=i.val())||"autogrow"===t.type){a||(a=i.attr("placeholder")||""),c.html(a.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));var n=c.width()+r,o="function"==typeof e.maxWidth?e.maxWidth():e.maxWidth;n>o?n=o:n<e.minWidth&&(n=e.minWidth),n!=i.width()&&i.width(n)}};i.on(n+".autogrow autogrow",s),s()}),this}}(jQuery);(function(b){b.fn.matchHeight=function(a){if("remove"===a){var d=this;this.css("height","");b.each(b.fn.matchHeight._groups,function(b,a){a.elements=a.elements.not(d)});return this}if(1>=this.length)return this;a="undefined"!==typeof a?a:!0;b.fn.matchHeight._groups.push({elements:this,byRow:a});b.fn.matchHeight._apply(this,a);return this};b.fn.matchHeight._apply=function(a,d){var c=b(a),f=[c],e=b(window).scrollTop(),h=b("html").outerHeight(!0);d&&(c.each(function(){var a=b(this),c="inline-block"===a.css("display")?"inline-block":"block";a.css({display:c,"padding-top":"0","padding-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px"})}),f=m(c),c.css({display:"","padding-top":"","padding-bottom":"","border-top-width":"","border-bottom-width":"",height:""}));b.each(f,function(a,c){var d=b(c),f=0,e=d.parents().add(d).filter(":hidden");e.css({display:"block"});d.each(function(){var a=b(this),c="inline-block"===a.css("display")?"inline-block":"block";a.css({display:c,height:""});a.outerHeight(!1)>f&&(f=a.outerHeight(!1));a.css({display:""})});e.css({display:""});d.each(function(){var a=b(this),c=0;"border-box"!==a.css("box-sizing")&&(c+=g(a.css("border-top-width"))+g(a.css("border-bottom-width")),c+=g(a.css("padding-top"))+g(a.css("padding-bottom")));a.css("height",f-c)})});b.fn.matchHeight._maintainScroll&&b(window).scrollTop(e/h*b("html").outerHeight(!0));return this};b.fn.matchHeight._applyDataApi=function(){var a={};b("[data-match-height], [data-mh]").each(function(){var d=b(this),c=d.attr("data-match-height")||d.attr("data-mh");a[c]=c in a?a[c].add(d):d});b.each(a,function(){this.matchHeight(!0)})};b.fn.matchHeight._groups=[];b.fn.matchHeight._throttle=80;b.fn.matchHeight._maintainScroll=!1;var l=-1,k=-1;b.fn.matchHeight._update=function(a){if(a&&"resize"===a.type){a=b(window).width();if(a===l)return;l=a}-1===k&&(k=setTimeout(function(){b.each(b.fn.matchHeight._groups,function(){b.fn.matchHeight._apply(this.elements,this.byRow)});k=-1},b.fn.matchHeight._throttle))};b(b.fn.matchHeight._applyDataApi);b(window).bind("load resize orientationchange",b.fn.matchHeight._update);var m=function(a){var d=null,c=[];b(a).each(function(){var a=b(this),e=a.offset().top-g(a.css("margin-top")),h=0<c.length?c[c.length-1]:null;null===h?c.push(a):1>=Math.floor(Math.abs(d-e))?c[c.length-1]=h.add(a):c.push(a);d=e});return c},g=function(a){return parseFloat(a)||0}})(jQuery);jQuery.fn.extend({insertAtCaret:function(text){return this.each(function(){if(document.selection&&this.tagName=="TEXTAREA"){this.focus();sel=document.selection.createRange();sel.text=text;sel.moveStart("character",0);this.focus()}else if(this.selectionStart||this.selectionStart=="0"){startPos=this.selectionStart;endPos=this.selectionEnd;scrollTop=this.scrollTop;this.value=this.value.substring(0,startPos)+text+this.value.substring(endPos,this.value.length);this.focus();this.selectionStart=startPos+text.length;this.selectionEnd=startPos+text.length;this.scrollTop=scrollTop}else{this.focus();$(this).trigger("focus.placeholder");this.value+=text;this.focus()}})}});(function($,s){$.vk={version:"0.2.0",textAcceptingInputTypes:["text"],replaces:{A:"Ä",a:"ä",O:"Ö",o:"ö",U:"Ü",u:"ü","Ä":"Ae","ä":"ae","Ö":"Oe","ö":"oe","Ü":"Ue","ü":"ue"},replaces2:{S:"ß",s:"ß","ß":"Ss","ß":"ss"},ss:"äöüßÄÖÜß"};function offsetToRangeCharacterMove(el,offset){return offset-(el.value.slice(0,offset).split("\r\n").length-1)}function getInputSelection(el){var start=0,end=0,normalizedValue,range,textInputRange,len,endRange;if(typeof el.selectionStart=="number"&&typeof el.selectionEnd=="number"){start=el.selectionStart;end=el.selectionEnd}else{range=document.selection.createRange();if(range&&range.parentElement()==el){len=el.value.length;normalizedValue=el.value.replace(/\r\n/g,"\n");textInputRange=el.createTextRange();textInputRange.moveToBookmark(range.getBookmark());endRange=el.createTextRange();endRange.collapse(false);if(textInputRange.compareEndPoints("StartToEnd",endRange)>-1){start=end=len}else{start=-textInputRange.moveStart("character",-len);start+=normalizedValue.slice(0,start).split("\n").length-1;if(textInputRange.compareEndPoints("EndToEnd",endRange)>-1){end=len}else{end=-textInputRange.moveEnd("character",-len);end+=normalizedValue.slice(0,end).split("\n").length-1}}}}return{start:start,end:end}}function setInputSelection(el,startOffset,endOffset){el.focus();if(typeof el.selectionStart=="number"&&typeof el.selectionEnd=="number"){el.selectionStart=startOffset;el.selectionEnd=endOffset}else{var range=el.createTextRange();var startCharMove=offsetToRangeCharacterMove(el,startOffset);range.collapse(true);if(startOffset==endOffset){range.move("character",startCharMove)}else{range.moveEnd("character",offsetToRangeCharacterMove(el,endOffset));range.moveStart("character",startCharMove)}range.select()}}function vkHandler(event){if(!s.keyboard)return;if(this!==event.target&&$.inArray(event.target.type,$.vk.textAcceptingInputTypes)>-1){return}var charStr=String.fromCharCode(event.which).toLowerCase();if("e"!==charStr&&"s"!==charStr)return;var sel=getInputSelection(this),val=this.value;if(sel.start<=0)return;var lastChar=val.slice(sel.start-1,sel.start);if(charStr=="e"){var replaces=$.vk.replaces}else{var replaces=$.vk.replaces2}if(!replaces[lastChar])return;this.value=val.slice(0,sel.start-1)+replaces[lastChar]+val.slice(sel.end);var pos=sel.start+replaces[lastChar].length-1;setInputSelection(this,pos,pos);return false}$(document).on("keydown.vk","textarea, input",vkHandler)})(jQuery,SITE);(function($){$.fn.soundplayer=function(o){o=$.extend({},o);return this.each(function(){var player=this;var sound_mp3=$(this).is("a")?$(this).attr("href"):$(this).data("sound")?$(this).data("sound"):$(this).find("a").attr("href");if(!sound_mp3||sound_mp3==""||sound_mp3=="#")return;var id=$(player).attr("id");$(this).jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:sound_mp3})},play:function(){$(this).jPlayer("pauseOthers")},swfPath:"",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:false,backgroundColor:"#000000",cssSelectorAncestor:"#"+id+"_container",remainingDuration:true,cssSelector:{play:".play",pause:".jp-state-playing .play",stop:".jp-stop",seekBar:".seek-bar",playBar:".play-bar",duration:".duration",title:".title",noSolution:".no-solution"},wmode:"window",globalVolume:true,useStateClassSkin:true,errorAlerts:false,warningAlerts:false})})}})(jQuery);(function(e){"use strict";Date.now=Date.now||function(){return+new Date},e.ias=function(t){function u(){var t;i.onChangePage(function(e,t,r){s&&s.setPage(e,r),n.onPageChange.call(this,e,r,t)});if(n.triggerPageThreshold>0)a();else if(e(n.next).attr("href")){var u=r.getCurrentScrollOffset(n.scrollContainer);E(function(){p(u)})}return s&&s.havePage()&&(l(),t=s.getPage(),r.forceScrollTop(function(){var n;t>1?(v(t),n=h(!0),e("html, body").scrollTop(n)):a()})),o}function a(){c(),n.scrollContainer.scroll(f)}function f(){var e,t;e=r.getCurrentScrollOffset(n.scrollContainer),t=h(),e>=t&&(m()>=n.triggerPageThreshold?(l(),E(function(){p(e)})):p(e))}function l(){n.scrollContainer.unbind("scroll",f)}function c(){e(n.pagination).hide()}function h(t){var r,i;return r=e(n.container).find(n.item).last(),r.size()===0?0:(i=r.offset().top+r.height(),t||(i+=n.thresholdMargin),i)}function p(t,r){var s;s=e(n.next).attr("href");if(!s)return n.noneleft&&e(n.container).find(n.item).last().after(n.noneleft),l();if(n.beforePageChange&&e.isFunction(n.beforePageChange)&&n.beforePageChange(t,s)===!1)return;i.pushPages(t,s),l(),y(),d(s,function(t,i){var o=n.onLoadItems.call(this,i),u;o!==!1&&(e(i).hide(),u=e(n.container).find(n.item).last(),u.after(i),e(i).fadeIn()),s=e(n.next,t).attr("href"),e(n.pagination).replaceWith(e(n.pagination,t)),b(),c(),s?a():l(),n.onRenderComplete.call(this,i),r&&r.call(this)})}function d(t,r,i){var s=[],o,u=Date.now(),a,f;i=i||n.loaderDelay,e.get(t,null,function(t){o=e(n.container,t).eq(0),0===o.length&&(o=e(t).filter(n.container).eq(0)),o&&o.find(n.item).each(function(){s.push(this)}),r&&(f=this,a=Date.now()-u,a<i?setTimeout(function(){r.call(f,t,s)},i-a):r.call(f,t,s))},"html")}function v(t){var n=h(!0);n>0&&p(n,function(){l(),i.getCurPageNum(n)+1<t?(v(t),e("html,body").animate({scrollTop:n},400,"swing")):(e("html,body").animate({scrollTop:n},1e3,"swing"),a())})}function m(){var e=r.getCurrentScrollOffset(n.scrollContainer);return i.getCurPageNum(e)}function g(){var t=e(".ias_loader");return t.size()===0&&(t=e('<div class="ias_loader">'+n.loader+"</div>"),t.hide()),t}function y(){var t=g(),r;n.customLoaderProc!==!1?n.customLoaderProc(t):(r=e(n.container).find(n.item).last(),r.after(t),t.fadeIn())}function b(){var e=g();e.remove()}function w(t){var r=e(".ias_trigger");return r.size()===0&&(r=e('<div class="ias_trigger"><a href="#">'+n.trigger+"</a></div>"),r.hide()),e("a",r).unbind("click").bind("click",function(){return S(),t.call(),!1}),r}function E(t){var r=w(t),i;n.customTriggerProc!==!1?n.customTriggerProc(r):(i=e(n.container).find(n.item).last(),i.after(r),r.fadeIn())}function S(){var e=w();e.remove()}var n=e.extend({},e.ias.defaults,t),r=new e.ias.util,i=new e.ias.paging(n.scrollContainer),s=n.history?new e.ias.history:!1,o=this;u()},e.ias.defaults={container:"#container",scrollContainer:e(window),item:".item",pagination:"#pagination",next:".next",noneleft:!1,loader:'<img src="images/loader.gif"/>',loaderDelay:600,triggerPageThreshold:3,trigger:"Load more items",thresholdMargin:0,history:!0,onPageChange:function(){},beforePageChange:function(){},onLoadItems:function(){},onRenderComplete:function(){},customLoaderProc:!1,customTriggerProc:!1},e.ias.util=function(){function i(){e(window).load(function(){t=!0})}var t=!1,n=!1,r=this;i(),this.forceScrollTop=function(i){e("html,body").scrollTop(0),n||(t?(i.call(),n=!0):setTimeout(function(){r.forceScrollTop(i)},1))},this.getCurrentScrollOffset=function(e){var t,n;return e.get(0)===window?t=e.scrollTop():t=e.offset().top,n=e.height(),t+n}},e.ias.paging=function(){function s(){e(window).scroll(o)}function o(){var t,s,o,f,l;t=i.getCurrentScrollOffset(e(window)),s=u(t),o=a(t),r!==s&&(f=o[0],l=o[1],n.call({},s,f,l)),r=s}function u(e){for(var n=t.length-1;n>0;n--)if(e>t[n][0])return n+1;return 1}function a(e){for(var n=t.length-1;n>=0;n--)if(e>t[n][0])return t[n];return null}var t=[[0,document.location.toString()]],n=function(){},r=1,i=new e.ias.util;s(),this.getCurPageNum=function(t){return t=t||i.getCurrentScrollOffset(e(window)),u(t)},this.onChangePage=function(e){n=e},this.pushPages=function(e,n){t.push([e,n])}},e.ias.history=function(){function n(){t=!!(window.history&&history.pushState&&history.replaceState),t=!1}var e=!1,t=!1;n(),this.setPage=function(e,t){this.updateState({page:e},"",t)},this.havePage=function(){return this.getState()!==!1},this.getPage=function(){var e;return this.havePage()?(e=this.getState(),e.page):1},this.getState=function(){var e,n,r;if(t){n=history.state;if(n&&n.ias)return n.ias}else{e=window.location.hash.substring(0,7)==="#/page/";if(e)return r=parseInt(window.location.hash.replace("#/page/",""),10),{page:r}}return!1},this.updateState=function(t,n,r){e?this.replaceState(t,n,r):this.pushState(t,n,r)},this.pushState=function(n,r,i){var s;t?history.pushState({ias:n},r,i):(s=n.page>0?"#/page/"+n.page:"",window.location.hash=s),e=!0},this.replaceState=function(e,n,r){t?history.replaceState({ias:e},n,r):this.pushState(e,n,r)}}})(jQuery);$.fn.exercise=function(o){o=$.extend({type:"exerciseDragAndDrop"},o);var that=this;this.each(function(){var type=$(this).data("type")||o.type,loaded=false,init=function(){$("input.autoresize").autoGrowInput({comfortZone:0,minWidth:10,maxWidth:800}).attr("autocapitalize","off");if(type=="exerciseDragAndDrop"||type=="exerciseSort"){$(that).find(".drag-items").sortable({connectWith:".drag-items",items:".drag-item",tolerance:"pointer",cursorAt:{left:0,top:0},placeholder:"ui-state-highlight",stop:function(event,ui){setValues();$("#lesson-content .equal-height .h").matchHeight()},create:function(event,ui){if(type=="exerciseSort"){setValues()}}}).disableSelection();if($("#lesson-content").hasClass("lesson-done"))$(that).find(".drag-items").sortable("disable");if(type=="exerciseDragAndDrop"){$(that).on("click.dragdrop",".drag-item",function(e){e.stopPropagation();if($("#lesson-content").hasClass("lesson-done"))return false;if($(this).parent().hasClass("exercise-drop-answer")){var target=$(this).closest(".exercise-dragdrop-item").find(".exercise-options:first");flyTo($(this),$(target))}else{var el=$(".exercise-drop-answer");for(var i=0;i<el.length;i++){if($(el[i]).html().trim().length==0){flyTo($(this),$(el[i]));return}}}})}}if(type=="exerciseSort"){$(that).find(".drag-items").sortable("option","containment","parent")}if(type=="exerciseSelectInput"){if($("#lesson-content").hasClass("lesson-done")){$(that).find(".form-control").prop("disabled",true)}}},setValues=function(){$(that).find(".drop-area").each(function(){var item=this;var glue=";";var value="";if($(item).find(".drag-item").size()){$(item).find(".drag-item").each(function(){value+=$(this).data("value")+glue});$(item).parent().find("input").val(value)}else{$(item).parent().find("input").val("")}})},flyTo=function(flyer,flyingTo,callBack){$(flyer).css({opacity:"1",position:"absolute","z-index":"10000",left:$(flyer).offset().left,top:$(flyer).offset().top}).appendTo($("body")).animate({top:$(flyingTo).offset().top,left:$(flyingTo).offset().left+$(flyingTo).width()/2-$(flyer).width()/2},300,function(){$(flyer).appendTo($(flyingTo)).css({position:"inherit"});setValues()})};init()});return this};(function(jQuery){jQuery.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:false,filterTextInputs:false,filterContentEditable:true}};function keyHandler(handleObj){if(typeof handleObj.data==="string"){handleObj.data={keys:handleObj.data}}if(!handleObj.data||!handleObj.data.keys||typeof handleObj.data.keys!=="string"){return}var origHandler=handleObj.handler,keys=handleObj.data.keys.toLowerCase().split(" ");handleObj.handler=function(event){if(this!==event.target&&(jQuery.hotkeys.options.filterInputAcceptingElements&&jQuery.hotkeys.textInputTypes.test(event.target.nodeName)||jQuery.hotkeys.options.filterContentEditable&&jQuery(event.target).attr("contenteditable")||jQuery.hotkeys.options.filterTextInputs&&jQuery.inArray(event.target.type,jQuery.hotkeys.textAcceptingInputTypes)>-1)){return}var special=event.type!=="keypress"&&jQuery.hotkeys.specialKeys[event.which],character=String.fromCharCode(event.which).toLowerCase(),modif="",possible={};jQuery.each(["alt","ctrl","shift"],function(index,specialKey){if(event[specialKey+"Key"]&&special!==specialKey){modif+=specialKey+"+"}});if(event.metaKey&&!event.ctrlKey&&special!=="meta"){modif+="meta+"}if(event.metaKey&&special!=="meta"&&modif.indexOf("alt+ctrl+shift+")>-1){modif=modif.replace("alt+ctrl+shift+","hyper+")}if(special){possible[modif+special]=true}else{possible[modif+character]=true;possible[modif+jQuery.hotkeys.shiftNums[character]]=true;if(modif==="shift+"){possible[jQuery.hotkeys.shiftNums[character]]=true}}for(var i=0,l=keys.length;i<l;i++){if(possible[keys[i]]){return origHandler.apply(this,arguments)}}}}jQuery.each(["keydown","keyup","keypress"],function(){jQuery.event.special[this]={add:keyHandler}})})(jQuery||this.jQuery||window.jQuery);jQuery.cookie=function(name,value,options){if(typeof value!="undefined"){options=options||{};if(value===null){value="";options.expires=-1}var expires="";if(options.expires&&(typeof options.expires=="number"||options.expires.toUTCString)){var date;if(typeof options.expires=="number"){date=new Date;date.setTime(date.getTime()+options.expires*24*60*60*1e3)}else{date=options.expires}expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"";var domain=options.domain?"; domain="+options.domain:"";var secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")}else{var cookieValue=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}};(function(s,a){a.trim=function(){return this.replace(/^\s+|\s+$/g,"")};a.strip_tags=function(){return this.replace(/(<([^>]+)>)/gi,"")};s.utils.goto=function(url,page){document.location=url+"/"+page};s.utils.submitForm=function(el){$(el).closest("form").submit()};s.utils.resetForm=function(el){$(el).closest("form").find("input").each(function(){var type=$(this).attr("type");if(type=="checkbox")$(this).prop("checked",false);if(type=="text")$(this).val("")})};s.utils.initMailcheck=function(element,confirm){$(element).on("blur",function(){$(this).mailcheck({domains:["gmail.com","hotmail.com","yahoo.com","wp.pl","o2.pl","interia.pl","mail.ru","op.pl","seznam.cz","hotmail.fr","azet.sk","net.hr","yahoo.fr","onet.pl","centrum.sk","vp.pl","live.com","outlook.com","poczta.onet.pl","onet.eu","tlen.pl","yandex.ru","interia.eu","poczta.fm","yahoo.de","live.fr","orange.fr","windowslive.com","centrum.cz","laposte.net","ymail.com","hotmail.it","email.cz","gazeta.pl","icloud.com","libero.it","outlook.fr","siol.net","web.de","zoznam.sk","free.fr","gmx.de","rambler.ru","hotmail.de","buziaczek.pl","yahoo.it","wanadoo.fr","msn.com","ukr.net","autograf.pl","bk.ru","yahoo.co.uk","googlemail.com","aol.com","amorki.pl","list.ru","inbox.ru","spoko.pl","abv.bg","me.com","pobox.sk","sfr.fr","live.it","onet.com.pl","gmx.at","yahoo.pl","bluewin.ch","hotmail.co.uk","mail.com","t-online.de","rocketmail.com","inet.hr","live.de","atlas.sk"],topLevelDomains:["co.jp","co.uk","com","net","org","info","edu","gov","mil","ca","de","fr","es","pl","ru","cz","br","nl","au","mx","jp","kr","cn","se"],suggested:function(e,t){var n=$('<div class="mailcheck_suggestion small help-block">'+confirm.replace("{email}",'<a class="internal" href=":;">'+t.full+"</a>")+"</div>");n.find("a").on("click",function(n){n.preventDefault();e.siblings(".mailcheck_suggestion").remove();e.val(t.full)});e.siblings(".mailcheck_suggestion").remove();$(n).insertAfter(e)},empty:function(e){e.siblings(".mailcheck_suggestion").remove()}})})};s.utils.fix=function(el,container,offset){if(typeof offset=="undefined"){offset=0}$(el).each(function(){var obj=this;$(obj).css({position:"relative"});var idCounter=0;var oo=$(obj).offset().top;$(window).scroll(function(){var myId=++idCounter;setTimeout(function(){if(myId===idCounter){var sc=$(this).scrollTop();var ch=$(container).height();var co=$(container).offset().top;var oh=$(obj).height();if($(window).width()<=756||co>sc||oh>=ch){$(obj).animate({top:"0px"},100);return}var top=0;var max=ch-oh;top=sc-co;if(top>max)top=max;$(obj).animate({top:top+"px"},100)}},500)})})};s.utils.initSoundPlayer=function(){$(".soundplayer").each(function(){$(this).soundplayer();$(this).removeClass("soundplayer")})};s.utils.initLesson=function(){$(".exercise").exercise();SITE.utils.initSoundPlayer();$("#lesson-content").on("submit","form",function(event){event.preventDefault();var form=$(this);var data=form.serialize();$.post("",data,function(response){var top=$(window).scrollTop();var element=$($.parseHTML(response)).find("#lesson-content");$("#lesson-content").replaceWith($(element));setTimeout(function(){$("#lesson-content .equal-height .h").matchHeight();$("#lesson-content .adsbygoogle").each(function(){(adsbygoogle=window.adsbygoogle||[]).push({})});$("html, body").animate({scrollTop:top+"px"})},200);s.utils.initLesson()});return false})};s.utils.resetLesson=function(el){var lesson=$(el).closest(".lesson-done");$(lesson).removeClass("lesson-done");$(lesson).find(".drag-items").sortable("enable");$(lesson).find(".form-control").prop("disabled",false);$(window).trigger("resize")};s.utils.showDictionary=function(){$("#dictionary_modal").load(SITE.dict.route,function(response,status,xhr){if(status=="success"){$("#dictionary_modal").modal("show")}})};s.utils.switchDictLanguages=function(){if($("#DictWords_dictionary option[value='"+s.dict.dictionary.split("|").reverse().join("|")+"']").length>0){var result=s.dict.dictionary.split("|").reverse().join("|");$("#DictWords_dictionary").val(result);$("#DictWords_dictionary").trigger("change.select2");$("#DictWords_dictionary").trigger("change")}};s.utils.initDictionary=function(){if($("#DictWords_dictionary option[value='"+s.dict.dictionary.split("|").reverse().join("|")+"']").length>0){$("#dictionary-direction").removeClass("hide")}$(document).on("keydown",null,"shift+tab",function(e){e.preventDefault();s.utils.switchDictLanguages()});$("#dictionary-direction").on("click",function(e){e.preventDefault();s.utils.switchDictLanguages()});$("#dictionary-form").on("submit",function(e){e.preventDefault();$("#dictionary-direction").addClass("hide");$.post(SITE.dict.route,$(this).serialize()).done(function(data){if($("#DictWords_dictionary option[value='"+s.dict.dictionary.split("|").reverse().join("|")+"']").length>0){$("#dictionary-direction").removeClass("hide")}var content=$(data).find("#dictionary-results").html();$("#dictionary-results").html(content);$("#dictionary-language").html(SITE.dict.language)})});$("#DictWords_dictionary").on("change",function(e){$("#dictionary-results").html("");SITE.dict.dictionary=$(this).val();var result=s.dict.dictionary.split("|");if(result[0]==s.i18n.sourceLanguage){SITE.dict.language=result[1]}else{SITE.dict.language=result[0]}$(this).closest("form").submit()})};s.utils.initKeyboard=function(){var cookie=$.cookie("keyboard");s.keyboard=false;if(cookie===null||cookie==1){$("#keyboard-button").addClass("active");s.keyboard=true}$(document).on("keydown",null,"alt+2",function(e){e.preventDefault();$("#keyboard-button").trigger("click")});$("#keyboard-button").click(function(e){if(s.keyboard){s.keyboard=false;$(this).removeClass("active");$.cookie("keyboard",0,{path:"/"})}else{s.keyboard=true;$(this).addClass("active");$.cookie("keyboard",1,{expires:365,path:"/"})}})};s.utils.googleTranslate=function(w){w=w.strip_tags();var url="https://translate.google.com/#"+SITE.i18n.sourceLanguage+"/"+SITE.i18n.targetLanguage+"/"+w;window.open(url,"dictionary_window","scrollbars,resizable,status,width=900,height=600")};s.utils.translateSentences=function(){if(s.i18n.sourceLanguage==SITE.i18n.targetLanguage)return false;var timeout;$(document).on("mouseenter.google",".sentence",function(e){var text=$(this).text();var that=$(this);$(this).addClass("isHover");clearTimeout(timeout);if(text.length>3){setTimeout(function(){if($(that).hasClass("isHover")){var content=$(that).data("content");if(content){$("#gt-popup-sentence").text(content);$("#gt-popup").show("fast");return}var params={w:text};if(SITE.request.enableCsrfValidation){params[SITE.request.csrfTokenName]=SITE.request.csrfToken}$.post(SITE.routes.translate,params).done(function(data){if(data.length>0){$("#gt-popup-sentence").text(data);$("#gt-popup").show("fast");$(that).data("content",data)}})}},500)}});$(document).on("mouseleave.google",".sentence",function(e){$(this).removeClass("isHover");var that=$(this);timeout=setTimeout(function(){$("#gt-popup").hide("fast",function(){$("#gt-popup-sentence").text("")})},2e3)})};s.utils.showDictionary=function(){$("#dictionary_modal").load(SITE.dict.route,function(response,status,xhr){if(status=="success"){$("#dictionary_modal").modal("show")}})};s.utils.switchDictLanguages=function(){if($("#DictWords_dictionary option[value='"+s.dict.dictionary.split("|").reverse().join("|")+"']").length>0){var result=s.dict.dictionary.split("|").reverse().join("|");$("#DictWords_dictionary").val(result);$("#DictWords_dictionary").trigger("change.select2");$("#DictWords_dictionary").trigger("change")}};s.utils.initDictionary=function(){if($("#DictWords_dictionary option[value='"+s.dict.dictionary.split("|").reverse().join("|")+"']").length>0){$("#dictionary-direction").removeClass("hide")}$(document).on("keydown",null,"shift+tab",function(e){e.preventDefault();s.utils.switchDictLanguages()});$("#dictionary-direction").on("click",function(e){e.preventDefault();s.utils.switchDictLanguages()});$("#dictionary-form").on("submit",function(e){e.preventDefault();$("#dictionary-direction").addClass("hide");$.post(SITE.dict.route,$(this).serialize()).done(function(data){if($("#DictWords_dictionary option[value='"+s.dict.dictionary.split("|").reverse().join("|")+"']").length>0){$("#dictionary-direction").removeClass("hide")}var content=$(data).find("#dictionary-results").html();$("#dictionary-results").html(content);$("#dictionary-language").html(SITE.dict.language)})});$("#DictWords_dictionary").on("change",function(e){$("#dictionary-results").html("");SITE.dict.dictionary=$(this).val();var result=s.dict.dictionary.split("|");if(result[0]==s.i18n.sourceLanguage){SITE.dict.language=result[1]}else{SITE.dict.language=result[0]}$(this).closest("form").submit()})}})(SITE,String.prototype);